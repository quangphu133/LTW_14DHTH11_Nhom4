@using WebApplication1.Models
@model List<Giohang>

@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_Layout1.cshtml";

    // Lấy thông tin khách hàng từ ViewBag để hiển thị
    var khachHang = ViewBag.KhachHang as KHACHHANG;
}

<div class="container" style="margin-top: 40px; margin-bottom: 40px;">
    <h2 class="text-center" style="margin-bottom: 30px; font-weight: bold; text-transform: uppercase;">Thông tin đặt hàng</h2>

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default" style="border-top: 3px solid #77b748; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div class="panel-heading" style="background: #fff; font-weight: bold; font-size: 16px;">
                    <i class="fa fa-user"></i> Thông tin người nhận
                </div>
                <div class="panel-body">
                    @using (Html.BeginForm("DatHang", "GioHang", FormMethod.Post))
                    {
                        <div class="form-group">
                            <label>Họ tên khách hàng:</label>
                            <input type="text" name="HoTen" class="form-control" value="@(khachHang != null ? khachHang.HoTen : "")" />
                        </div>
                        <div class="form-group">
                            <label>Địa chỉ nhận hàng:</label>
                            <input type="text" name="DiaChi" class="form-control" value="@(khachHang != null ? khachHang.DiaChi : "")" />
                        </div>
                        <div class="form-group">
                            <label>Số điện thoại:</label>
                            <input type="text" name="SDT" class="form-control" value="@(khachHang != null ? khachHang.SDT : "")" />
                        </div>
                        <div class="form-group">
                            <label>Email xác nhận:</label>
                            <input type="text" name="Email" class="form-control" value="@(khachHang != null ? khachHang.Email : "")" />
                        </div>


                        <div class="form-group text-right" style="margin-top: 20px;">
                            <button type="submit" class="btn btn-success btn-lg" style="width: 100%; background: #77b748; border-color: #77b748;">
                                <i class="fa fa-check"></i> XÁC NHẬN ĐẶT HÀNG
                            </button>
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="panel panel-default" style="border-top: 3px solid #333; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div class="panel-heading" style="background: #fff; font-weight: bold; font-size: 16px;">
                    <i class="fa fa-shopping-cart"></i> Đơn hàng của bạn (@ViewBag.TongSoLuong sản phẩm)
                </div>
                <div class="panel-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Sách</th>
                                <th class="text-center">SL</th>
                                <th class="text-right">Thành tiền</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <div style="font-weight: 600;">@item.sTenSach</div>
                                        <div style="font-size: 12px; color: #888;">@String.Format("{0:0,0}", item.dDonGia) đ</div>
                                    </td>
                                    <td class="text-center">@item.iSoLuong</td>
                                    <td class="text-right">@String.Format("{0:0,0}", item.dThanhTien) đ</td>
                                </tr>
                            }
                        </tbody>
                        <tfoot>
                            <tr style="font-size: 18px; font-weight: bold; border-top: 2px solid #ddd;">
                                <td colspan="2" class="text-right">Tổng cộng:</td>
                                <td class="text-right" style="color: #d9534f;">@String.Format("{0:0,0}", ViewBag.TongTien) VNĐ</td>
                            </tr>
                        </tfoot>
                    </table>

                    <div style="text-align: center;">
                        <a href="@Url.Action("GioHang", "GioHang")" class="btn btn-default btn-sm">
                            <i class="fa fa-pencil"></i> Chỉnh sửa giỏ hàng
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>